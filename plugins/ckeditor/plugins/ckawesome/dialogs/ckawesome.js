CKEDITOR.dialog.add("ckawesomeDialog",function(d){function b(f){var e=d.fontawesomePath;$.ajax({url:e,type:"get",dataType:"html",async:!1,success:function(g){var h=".fa. .fa .fa-lg .fa-2x .fa-3x .fa-4x .fa-5x .fa-fw .fa-ul .fa-ul\x3e .fa-li .fa-border .fa-pull-left .fa-pull-right .fa-spin .fa-pulse .fa-rotate-90 .fa-rotate-180 .fa-rotate-270 .fa-flip-horizontal .fa-flip-vertical .fa-stack .fa-stack-1x .fa-stack-2x .fa-inverse".split(" ");g=g.match(new RegExp(/\.[a-zA-Z_][\w-_]*[^\.\s\{#:\,;]/,"g"));g.sort();$.each(g,function(i,j){"fa"!=j.substring(0,3).substring(1)||0<h.indexOf(j)||(j=j.substring(1),f.add(j,j))})},error:function(g,h){alert("Error loading Font Awesome css: \n"+e)}})}function a(h,f,j,k){var i=[],l=f;i.push(f);k=0<k?k:5;for(f=0;f<k;f++){l+=j,i.push(l)}$.each(i,function(e,g){h.add(g,g)})}function c(f){if(!f.id){return f.text}var e=f.text.replace(/fa-|\.|\-/gi," ");return f=$('\x3cspan class\x3d"ckawesome_options"\x3e\x3ci class\x3d"fa '+f.element.value+' fa-fw"\x3e\x3c/i\x3e '+e+"\x3c/span\x3e")}return{title:"Insert CKAwesome",minWidth:200,minHeight:200,contents:[{id:"options",label:"Basic Settings",elements:[{type:"select",id:"ckawesomebox",label:"Select font Awesome",validate:CKEDITOR.dialog.validate.notEmpty("Font Awesome field cannot be empty."),items:[[d.lang.common.notSet,""]],onLoad:function(){b(this);var e=$("#"+this.getInputElement().getAttribute("id"));$(e).select2({width:"100%",templateResult:c,templateSelection:c})},onShow:function(){var e=$("#"+this.getInputElement().getAttribute("id"));$(e).val("").trigger("change")}},{type:"select",id:"textsize",label:"Select  size",items:[[d.lang.common.notSet,""]],onLoad:function(e){a(this,8,1,42)}},{type:"hbox",padding:0,widths:["80%","20%"],children:[{id:"fontcolor",type:"text",label:"Select color",onChange:function(e){e=$("#"+this.getInputElement().getAttribute("id"));e.css("background-color",e.val())},onKeyUp:function(e){e=$("#"+this.getInputElement().getAttribute("id"));e.css("background-color",e.val())},onShow:function(){$("#"+this.getInputElement().getAttribute("id")).css("background-color","")}},{type:"button",id:"fontcolorChooser","class":"colorChooser",label:"Color",style:"margin-left: 8px",onLoad:function(){this.getElement().getParent().setStyle("vertical-align","bottom")},onClick:function(){d.getColorFromDialog(function(e){e&&this.getDialog().getContentElement("options","fontcolor").setValue(e);this.focus()},this)}}]}]}],onOk:function(){var g=d.document.createElement("span"),e=this.getValueOf("options","textsize"),h=this.getValueOf("options","fontcolor"),i="fa fa-fw "+this.getValueOf("options","ckawesomebox"),e=(""!=e?"font-size: "+e+"px;":"")+(""!=h?"color: "+h+";":"");g.setAttribute("class",i);e&&g.setAttribute("style",e);g.setAttribute("aria-hidden","true");g.appendHtml("\x26nbsp;");d.insertElement(g)}}});